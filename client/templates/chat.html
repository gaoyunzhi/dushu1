<ion-view view-title="读书分享">
  <ion-nav-buttons side="right">
    <button class="button button-clear"><img class="header-picture" ng-src="{{  }}"></button>
  </ion-nav-buttons>
  <ion-content class="chat" delegate-handle="chatScroll">
    <div class="message-list">
      <div ng-repeat="message in messages" ng-init="text=getText(message); author=getAuthor(text);" class="message-wrapper">
        <div class="message" ng-class="message.type === 'send' ? 'message-mine' : 'message-other'">
          <div class="text">{{text.text}} by {{author.name}} ({{author.wechat_id}})</div> 
          <span class="message-timestamp">{{text.timestamp | amDateFormat: 'HH:mm'}}</span>
        </div>
      </div>
    </div>
  </ion-content>
  <ion-footer-bar keyboard-attach class="bar-stable footer-chat item-input-inset">

    <label class="item-input-wrapper">
      <input
              ng-model="chat.message"
              dir="auto"
              type="text"
              on-return="chat.sendMessage(); chat.closeKeyboard()"
              on-focus="chat.inputUp()"
              on-blur="chat.inputDown()"/>
    </label>

    <span ng-if="chat.message.length > 0">
      <button ng-click="chat.sendMessage()" class="button button-clear button-positive">发表</button>
    </span>
  </ion-footer-bar>
</ion-view>